{% extends "base.html" %}
{% block title %}The Grand Archives{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--ink); margin-bottom: 2rem;">
    <div>
        <h1 style="margin:0;">The Grand Archives</h1>
        <p style="font-style: italic; opacity: 0.8;">Knowledge of the Realm</p>
    </div>
    {% if user and user.role == 'GM' %}
    <a href="/wiki/new" class="btn">Write New Entry</a>
    {% endif %}
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
    
    {% for category, pages in library.items() %}
    <div style="background: var(--parchment); border: 1px solid #8b7d6b; padding: 1.5rem; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);">
        <h3 style="color: var(--accent); border-bottom: 1px dashed var(--ink); padding-bottom: 5px; margin-top: 0;">
            {{ category }}
        </h3>
        <ul style="list-style: none; padding: 0;">
            {% for page in pages %}
            <li style="margin-bottom: 8px;">
                <a href="/wiki/{{ page._id }}" style="color: var(--ink); text-decoration: none; display: block; padding: 5px; border-radius: 4px; transition: background 0.2s;">
                    ðŸ“œ {{ page.title }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; opacity: 0.6;">
        <p>The archives are currently empty.</p>
    </div>
    {% endfor %}

</div>
{% endblock %}